@page "/Languages/HighVersianLangauge/Prefix/{Prefix}"
@using TravellerWiki.Data.Services.DataServices
@inject HighVersianService highVersian
<head>
    <title>High Versian - @Prefix</title>
</head>
<style>
    .high {
        font-family: 'high_versianregular';
    }
</style>

@code
{
    [Parameter]
    public string Prefix { get; set; }

    public HighVersianDefinition _prefix => GetPrefix();

    public HighVersianDefinition GetPrefix()
    {
        return highVersian.Prefixes.FirstOrDefault(x => x.Letters.ToUpper() == Prefix.ToUpper());
    }


    public HighVersianDefinition GenerateWord(HighVersianDefinition root, HighVersianDefinition postfix)
    {
        return highVersian.GetWord(_prefix.Letters, root.Letters, postfix.Letters);
    }

}

<body>
    <h1>High Versian: <div class="high">@_prefix.Letters</div> </h1>
    <p><b class="high">@_prefix.Letters</b> (@_prefix.Letters): @_prefix.Meaning</p>
    @foreach (var letter in highVersian.Letters())
    {
        <details >
            <summary class="IndexSummery"><b class="high">@letter.ToString() (@highVersian.Roots.Count(x => x.Letters.StartsWith(letter.ToString())).ToString())</b></summary>
            @foreach (var root in highVersian.Roots.Where(x => x.Letters.StartsWith(letter.ToString())))
            {
                <details>
                    <summary class="SmallerSummery"><b class="high">@root</b></summary>
                    <ol>
                        @foreach (var finishedWord in highVersian.Postfixes.Select(post => GenerateWord(root,post)
                            ))
                        {
                            <li><b class="high">@finishedWord.Letters.ToUpper()</b> [@finishedWord.Letters.ToLower()]: @finishedWord.Meaning</li>
                        }
                    </ol>
                </details>

            }
        </details>
    }
</body>
